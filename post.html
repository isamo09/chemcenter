{% extends "base.html" %}

{% block title %}{{ post.title }} - {{ config.site_title }}{% endblock %}

{% block content %}
<div class="plugin-container">
    <header class="plugin-header">
        <div class="plugin-header-content">
            <a href="/" class="back-button">
                <i class="fas fa-arrow-left"></i> Назад
            </a>
            <div class="plugin-title-section">
                <img src="{{ config.site_logo_dark }}" alt="Логотип" class="header-logo plugin-logo">
                <h1><i class="fas fa-newspaper"></i> Статья</h1>
            </div>
            <button class="theme-toggle" id="themeToggle" title="Переключить тему">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </header>

    <main class="main-content">
        <article class="post-full">
            <header class="post-full-header">
                <h1>{{ post.title }}</h1>
                <div class="post-meta">
                    <span><i class="fas fa-calendar"></i> {{ post.updated_at }}</span>
                </div>
            </header>
            <div class="post-full-content">
                {{ post.content | safe }}
            </div>
        </article>
    </main>

    <footer class="footer">
        <p>&copy; 2025 {{ config.site_title }}. Все права защищены.</p>
    </footer>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    initTheme();
});

function initTheme() {
    const themeToggle = document.getElementById('themeToggle');
    const savedTheme = localStorage.getItem('theme') || 'light';
    
    document.documentElement.setAttribute('data-theme', savedTheme);
    updateThemeIcon(savedTheme);
    
    themeToggle.addEventListener('click', () => {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        updateThemeIcon(newTheme);
    });
}

function updateThemeIcon(theme) {
    const icon = document.getElementById('themeToggle').querySelector('i');
    icon.className = theme === 'light' ? 'fas fa-sun' : 'fas fa-moon';
}
</script>
{% endblock %}
