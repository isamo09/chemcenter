{% extends "base.html" %}

{% block title %}{{ post.title }} - {{ config.site_title }}{% endblock %}

{% block header %}
<header class="header">
    <div class="header-content">
        <div class="logo-section">
            <a href="/" class="back-link" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 0.5rem;">
                <i class="fas fa-arrow-left"></i>
                <img src="{{ config.site_logo_dark if config and config.site_logo_dark else '/static/images/logo-dark.png' }}" alt="Логотип {{ config.site_title }}" class="header-logo">
            </a>
            <h1 class="site-title">{{ post.title }}</h1>
        </div>
        <nav class="header-nav">
            <button class="theme-toggle" id="themeToggle" title="Переключить тему" aria-label="Переключить тему">
                <i class="fas fa-moon" aria-hidden="true"></i>
            </button>
            <a href="/" class="admin-link" aria-label="На главную">
                <i class="fas fa-home" aria-hidden="true"></i> <span>Главная</span>
            </a>
        </nav>
    </div>
</header>
{% endblock %}

{% block content %}
<div class="plugin-container">
    <main class="main-content">
        <article class="post-full">
            <header class="post-full-header">
                <h1>{{ post.title }}</h1>
                <div class="post-meta">
                    <span><i class="fas fa-calendar"></i> {{ post.updated_at }}</span>
                </div>
            </header>
            <div class="post-full-content">
                {{ post.content | safe }}
            </div>
        </article>
    </main>

    <footer class="footer">
        <p>&copy; 2025 {{ config.site_title }}. Все права защищены.</p>
    </footer>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    initTheme();
});

function initTheme() {
    const themeToggle = document.getElementById('themeToggle');
    const savedTheme = localStorage.getItem('theme') || 'light';
    
    document.documentElement.setAttribute('data-theme', savedTheme);
    updateThemeIcon(savedTheme);
    
    themeToggle.addEventListener('click', () => {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        updateThemeIcon(newTheme);
    });
}

function updateThemeIcon(theme) {
    const icon = document.getElementById('themeToggle').querySelector('i');
    icon.className = theme === 'light' ? 'fas fa-sun' : 'fas fa-moon';
}
</script>
{% endblock %}
